# BatchExAbc UI助手集成说明

## 概述

已成功将UI助手模块集成到BatchExAbc中，实现了简单的数据驱动UI更新功能。

## 实现的功能

### 1. 数据中心 (data_center.py)
- **简化版配置管理器**：支持基本的路径配置
- **ProjectData, ShotData, AssetData**：基本的数据结构
- **DataCenter**：数据管理中心，支持回调机制

### 2. UI助手 (ui_helper.py)
- **ProjectHelper**：项目下拉框助手，自动同步项目选择
- **ShotHelper**：镜头选择助手，管理集/场/镜头选择
- **AutoFillHelper**：自动填充助手，从Maya文件名解析项目信息
- **MainWindowHelper**：主窗口助手，统一管理所有助手

### 3. 集成到主窗口 (load_ui.py)
- 在MainWindow初始化时自动创建UI助手
- 在refresh()函数中集成数据刷新
- 通过回调机制实现UI自动更新

## 工作流程

1. **初始化**：主窗口创建时自动设置UI助手
2. **数据加载**：从文件系统扫描项目、镜头、资产数据
3. **自动填充**：根据Maya文件名自动识别项目信息
4. **UI更新**：通过回调机制自动更新UI控件
5. **用户交互**：用户选择项目/镜头时自动同步数据

## 使用方法

### 基本用法
```python
# load_ui.py中已自动集成，无需额外操作
# 主窗口会自动：
# 1. 创建数据中心
# 2. 设置UI助手
# 3. 加载项目数据
# 4. 自动填充Maya文件信息
```

### 获取当前选择信息
```python
# 在主窗口中获取当前镜头信息
if hasattr(self, 'ui_helper') and self.ui_helper:
    shot_info = self.ui_helper.get_current_shot_info()
    if shot_info:
        print("当前项目:", shot_info['project'])
        print("当前集:", shot_info['episode'])
        print("当前场:", shot_info['sequence'])
        print("当前镜头:", shot_info['shot_name'])
        print("镜头路径:", shot_info['shot_path'])
```

### 手动刷新数据
```python
# 手动刷新项目和镜头数据
if hasattr(self, 'ui_helper') and self.ui_helper:
    self.ui_helper.refresh_data()
```

## 文件结构

```
BatchExAbc/
├── data_center.py       # 数据中心模块
├── ui_helper.py         # UI助手模块
├── load_ui.py          # 主UI模块（已集成）
└── 使用说明.md          # 本文档
```

## 注意事项

1. **最小修改原则**：只在必要位置添加了UI助手集成，保持原有代码逻辑
2. **Python 2.7兼容**：使用.format()字符串格式化，兼容旧版本
3. **简化实现**：第一版本以简单实用为主，后续可根据需要扩展
4. **文件系统依赖**：需要G:/项目目录结构存在才能正常工作

## 扩展建议

后续可以考虑：
1. 添加配置文件支持
2. 增强缓存机制
3. 添加更多UI控件的自动化支持
4. 集成资产选择功能
